{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cxr72\\\\Documents\\\\github\\\\meanStack dev\\\\project-client-the-mern-clan\\\\src\\\\components\\\\Register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport \"./Login.css\";\nimport decode from 'jwt-decode';\nimport { useHistory } from \"react-router-dom\";\nimport apiService from './apiService';\nimport { API_Types_Enum, apiCallURLS } from \"./DataConstants\";\nimport AuthContext from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Register = () => {\n  _s();\n\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState();\n  const auth = useContext(AuthContext); //formik for form validations and error message\n\n  const formik = useFormik({\n    initialValues: {\n      name: '',\n      email: '',\n      password: ''\n    },\n    validationSchema: Yup.object({\n      name: Yup.string().required('Required'),\n      email: Yup.string().email('Invalid email address').required('Required'),\n      password: Yup.string().required('No password provided.').min(8, 'Password is too short - should be 8 chars minimum.')\n    }),\n    onSubmit: async values => {\n      setIsLoading(true);\n      apiService(apiCallURLS.register, {\n        name: values.name,\n        email: values.email,\n        password: values.password\n      }, API_Types_Enum.post, response => {\n        sessionStorage.setItem(\"token\", response.data['token']);\n        let decodeduser = decode(response.data.token);\n        console.log(decodeduser);\n        auth.login();\n        setIsLoading(false);\n        setError(null);\n        history.push('/home');\n      }, err => {\n        setIsLoading(false);\n        setError(err.response.data);\n      });\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Login\",\n    children: [isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-info regLabel\",\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 64\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: formik.handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        size: \"lg\",\n        controlId: \"name\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          autoFocus: true,\n          type: \"text\",\n          name: \"name\",\n          onChange: formik.handleChange,\n          value: formik.values.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), formik.touched.name && formik.errors.name ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-msg\",\n          children: formik.errors.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        size: \"lg\",\n        controlId: \"email\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          autoFocus: true,\n          type: \"email\",\n          name: \"email\",\n          onChange: formik.handleChange,\n          value: formik.values.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), formik.touched.email && formik.errors.email ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-msg\",\n          children: formik.errors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        size: \"lg\",\n        controlId: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          name: \"password\",\n          onChange: formik.handleChange,\n          value: formik.values.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), formik.touched.password && formik.errors.password ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-msg\",\n          children: formik.errors.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        block: true,\n        size: \"lg\",\n        type: \"submit\",\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger regLabel\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Register, \"jrSNdIYoo+HQL70HBuBkEBN+2O0=\", false, function () {\n  return [useHistory, useFormik];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["C:/Users/cxr72/Documents/github/meanStack dev/project-client-the-mern-clan/src/components/Register.js"],"names":["React","useState","useContext","useFormik","Yup","Form","Button","decode","useHistory","apiService","API_Types_Enum","apiCallURLS","AuthContext","Register","history","isLoading","setIsLoading","error","setError","auth","formik","initialValues","name","email","password","validationSchema","object","string","required","min","onSubmit","values","register","post","response","sessionStorage","setItem","data","decodeduser","token","console","log","login","push","err","handleSubmit","handleChange","touched","errors"],"mappings":"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","sourcesContent":["import React, { useState,useContext } from \"react\";\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport \"./Login.css\";\r\nimport decode from 'jwt-decode';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport apiService from './apiService';\r\nimport { API_Types_Enum, apiCallURLS } from \"./DataConstants\";\r\nimport AuthContext from '../contexts/AuthContext';\r\n\r\nconst Register = () => {\r\n  const history = useHistory();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState();\r\n  const auth = useContext(AuthContext);\r\n\r\n//formik for form validations and error message\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      name: '',\r\n      email: '',\r\n      password: ''\r\n    },\r\n    validationSchema: Yup.object({\r\n      name: Yup.string()\r\n        .required('Required'),\r\n      email: Yup.string().email('Invalid email address').required('Required'),\r\n      password: Yup.string()\r\n        .required('No password provided.')\r\n        .min(8, 'Password is too short - should be 8 chars minimum.'),\r\n    }),\r\n    onSubmit: async (values) => {\r\n      setIsLoading(true);\r\n      apiService(apiCallURLS.register,\r\n        {\r\n          name: values.name,\r\n          email: values.email,\r\n          password: values.password\r\n        },\r\n        API_Types_Enum.post,\r\n        (response) => {\r\n          sessionStorage.setItem(\"token\", response.data['token']);\r\n          let decodeduser = decode(response.data.token);\r\n          console.log(decodeduser);\r\n          auth.login();\r\n          setIsLoading(false);\r\n          setError(null);\r\n          history.push('/home');\r\n        },\r\n        (err) => {\r\n          setIsLoading(false);\r\n          setError(err.response.data);\r\n        });\r\n    },\r\n  });\r\n\r\n\r\n  return (\r\n    <div className=\"Login\">\r\n      {isLoading && <div className=\"alert alert-info regLabel\"><strong>Loading...</strong></div>}\r\n\r\n      <Form onSubmit={formik.handleSubmit}>\r\n        <Form.Group size=\"lg\" controlId=\"name\">\r\n          <Form.Label>Name</Form.Label>\r\n          <Form.Control\r\n            autoFocus\r\n            type=\"text\"\r\n            name='name'\r\n            onChange={formik.handleChange}\r\n            value={formik.values.name}\r\n          />\r\n          {formik.touched.name && formik.errors.name ? (\r\n\r\n            <div className=\"error-msg\">{formik.errors.name}</div>\r\n\r\n          ) : null}\r\n        </Form.Group>\r\n        <Form.Group size=\"lg\" controlId=\"email\">\r\n          <Form.Label>Email</Form.Label>\r\n          <Form.Control\r\n            autoFocus\r\n            type=\"email\"\r\n            name='email'\r\n            onChange={formik.handleChange}\r\n            value={formik.values.email}\r\n          />\r\n          {formik.touched.email && formik.errors.email ? (\r\n\r\n            <div className=\"error-msg\">{formik.errors.email}</div>\r\n\r\n          ) : null}\r\n        </Form.Group>\r\n        <Form.Group size=\"lg\" controlId=\"password\">\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            name='password'\r\n\r\n\r\n            onChange={formik.handleChange}\r\n            value={formik.values.password}\r\n          />\r\n          {formik.touched.password && formik.errors.password ? (\r\n\r\n            <div className=\"error-msg\">{formik.errors.password}</div>\r\n\r\n          ) : null}\r\n        </Form.Group>\r\n        <Button block size=\"lg\" type=\"submit\">\r\n          Register\r\n        </Button>\r\n      </Form>\r\n      {error && <div className=\"alert alert-danger regLabel\">{error}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}